"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.changedKeys = void 0;
var tslib_1 = require("tslib");
var isEqual_1 = tslib_1.__importDefault(require("lodash/isEqual"));
var joinName_1 = require("./joinName");
// eslint-disable-next-line complexity
function changedKeys(root, valueA, valueB) {
    if (!valueA || valueA !== Object(valueA) || valueA instanceof Date) {
        return isEqual_1.default(valueA, valueB) ? [] : [root];
    }
    var changed = [root];
    if (valueB) {
        for (var key in valueA) {
            if (!(key in valueB) || !isEqual_1.default(valueA[key], valueB[key])) {
                changed.push(joinName_1.joinName(root, key));
            }
        }
        for (var key in valueB) {
            if (!(key in valueA)) {
                changed.push(joinName_1.joinName(root, key));
            }
        }
        if (changed.length === 1) {
            changed.pop();
        }
    }
    else {
        // eslint-disable-next-line guard-for-in
        for (var key in valueA) {
            changed.push(joinName_1.joinName(root, key));
        }
    }
    return changed;
}
exports.changedKeys = changedKeys;
